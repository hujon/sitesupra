<!DOCTYPE html>
<html>
<head>
	<title>Input Color test</title>
	
	<script src="/cms/lib/pack.js"></script>
	<link rel="stylesheet" type="text/css" href="/cms/lib/pack.css" />
	
	<link rel="stylesheet" type="text/css" href="select.css" />
</head>
<body class="yui3-skin-supra">

	<div class="cms-content" id="cmsContent">
		
		<div class="ui-light ui-light-background" id="mainContent">
			<pre></pre>
		</div>
		
	</div>

	<script type="text/javascript">
	//<![CDATA[
	
		Supra('supra.manager', function (Y) {
			
			var APP_PATH = null,
				STATIC_PATH = '/cms',
				DYNAMIC_PATH = '/cms';
			
			//Set current manager paths
			Supra.Manager.Loader.setStaticPath(STATIC_PATH);
			Supra.Manager.Loader.setDynamicPath(DYNAMIC_PATH);
			
			var layout = Supra.Manager.getAction('LayoutContainers');
			
			layout.on('execute', function () {
				
				Supra('supra.form', function () {
					var form,
						input_default,
						input_multiple,
						
						debug = Y.one('pre'),
						inputs,
						key;
					
					form = window.form = new Supra.Form({
						'style': 'default',
						'inputs': [
							{
								'id': 'default',
								'type': 'SelectList',
								'label': 'Simple',
								'values': [
									{'id': 'a', 'title': 'Choice A'},
									{'id': 'b', 'title': 'Choice B'},
									{'id': 'c', 'title': 'Choice C'},
									{'id': 'd', 'title': 'Choice D'}
								],
							},
							{
								'id': 'multiple',
								'type': 'SelectList',
								'label': 'Multiple',
								'multiple': true,
								'values': [
									{'id': 'a', 'title': 'Choice A'},
									{'id': 'b', 'title': 'Choice B'},
									{'id': 'c', 'title': 'Choice C'},
									{'id': 'd', 'title': 'Choice D'}
								],
							},
							{
								'id': 'multiple2',
								'type': 'SelectList',
								'label': 'Multiple, complex value',
								'multiple': true,
								'values': [
									{'id': 'a', 'title': 'Choice A'},
									{'id': 'b', 'title': 'Choice B'},
									{'id': 'c', 'title': 'Choice C'},
									{'id': 'd', 'title': 'Choice D'}
								],
							}
						]
					});
					
					form.render(Y.one('#mainContent'));
					
					form.setValuesObject({
						'default': 'c',
						'multiple': ['a', 'c'],
						'multiple2': [{'id': 'a', 'title': 'Choice A'}, {'id': 'c', 'title': 'Choice C'}]
					}, 'id');
					
					// Debug
					form.get('boundingBox').insert(debug, 'after');
					inputs = form.getInputs('id');
					
					for (key in inputs) {
						inputs[key].after('valueChange', dumpValues);
					}
					
					function dumpValues () {
						var values = form.getSaveValues('id'),
							key, out = '';
						
						for (key in values) {
							out += key + ': ' + JSON.stringify(values[key]) + "\n";
						}
						
						debug.set('innerHTML', out);
					}
					
					dumpValues();
				})
				
			});
			
			layout.execute();
			
		});
		
	//]]>
	</script>
	
</body>
</html>
