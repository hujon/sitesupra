<!DOCTYPE html>
<html>
<head>
	<title>Content Manager v2</title>
	<script type="text/javascript" src="../../../yui.3.5.0/build/yui/yui-min.js"></script>
	<script type="text/javascript" src="../../../yui.3.5.0/build/loader/loader.js"></script>
	<script type="text/javascript" src="../../build/supra/supra.js"></script>
	<script type="text/javascript" src="../../build/supra/data.js"></script>
	<script type="text/javascript" src="../../build/supra/modules.js"></script>
</head>
<body class="yui3-skin-supra">
	
	<script type="text/javascript">
	//<![CDATA[
		
		Supra('console', 'test', 'dump', function (Y) {
			
			//Configuration / parameters
			Supra.data.set({
				//Date & time formats
				'dateFormat': '%d.%m.%Y',
				'timeFormat': '%H:%M:%S',
				'timeFormatShort': '%H:%M'
			});
			
			var ASSERT = Y.Assert,
				DT = Y.DataType.Date;
			
			var testCase = new Y.Test.Case({
				
				'name': 'Date and time reformat',
				
				'testStringToFormat': function () {
					var s = DT.stringToFormat;
					
					ASSERT.areEqual('%Y-%m-%d', s('in_date'), 'Internal date format not correct');
					ASSERT.areEqual('%H:%M:%S', s('in_time'), 'Internal time format not correct');
					ASSERT.areEqual('%H:%M', s('in_time_short'), 'Internal short time format not correct');
					ASSERT.areEqual('%Y-%m-%d %H:%M:%S', s('in_datetime'), 'Internal date time format not correct');
					ASSERT.areEqual('%d.%m.%Y', s('out_date'), 'Output date format not correct');
					ASSERT.areEqual('%H:%M:%S', s('out_time'), 'Output time format not correct');
					ASSERT.areEqual('%H:%M', s('out_time_short'), 'Output short time format not correct');
					ASSERT.areEqual('%d.%m.%Y %H:%M:%S', s('out_datetime'), 'Output date time format not correct');
					ASSERT.areEqual('%d.%m.%Y %H:%M', s('out_datetime_short'), 'Output short date time format not correct');
				},
				
				'testInternalDateToOutDate': function () {
					var date_in  = '2010-09-12',
						date_out = DT.reformat(date_in, 'in_date', 'out_date');
					
					ASSERT.areEqual('12.09.2010', date_out, 'Output date formatting not correct');
				},
				
				'testInternalDateTimeToOutDateTime': function () {
					var date_in  = '2010-09-12 12:30:12',
						date_out = DT.reformat(date_in, 'in_datetime', 'out_datetime');
					
					ASSERT.areEqual('12.09.2010 12:30:12', date_out, 'Output datetime formating not correct');
				},
				
				'testInternalDateTimeToOutDateTimeShort': function () {
					var date_in  = '2010-09-12 12:30:12',
						date_out = DT.reformat(date_in, 'in_datetime', 'out_datetime_short');
					
					ASSERT.areEqual('12.09.2010 12:30', date_out, 'Output datetime short formating not correct');
				},
				
				'testRawToOutDateTime': function () {
					var date_in  = new Date(2010, 8, 12, 12, 30, 12, 0),
						date_out = DT.reformat(date_in, 'raw', 'out_datetime');
					
					ASSERT.areEqual('12.09.2010 12:30:12', date_out, 'Raw to output datetime formating not correct');
				},
				
				'testTimeToTime': function () {
					var date_in   = '12:30:44',
						date_raw  = new Date(2010, 8, 12, 12, 30, 44, 0),
						date_out1 = DT.reformat(date_in, 'in_time', 'out_time_short'),
						date_out2 = DT.reformat(date_in, 'in_time', 'out_time'),
						date_out3 = DT.reformat(date_in, 'out_time', 'in_time');
						date_out4 = DT.reformat(date_raw, 'raw', 'in_time');
						date_out5 = DT.reformat(date_in, 'in_time', 'raw');
					
					ASSERT.areEqual('12:30', date_out1, 'Internal to output short time formating not correct');
					ASSERT.areEqual('12:30:44', date_out2, 'Internal to output time formating not correct');
					ASSERT.areEqual('12:30:44', date_out3, 'Output to internal time formating not correct');
					ASSERT.areEqual('12:30:44', date_out4, 'Raw to internal time formating not correct');
					ASSERT.areEqual(12, date_out5.getHours(), 'Internal to raw hours are not correct');
					ASSERT.areEqual(30, date_out5.getMinutes(), 'Internal to raw minutes are not correct');
					ASSERT.areEqual(44, date_out5.getSeconds(), 'Internal to raw seconds are not correct');
					
				},
				
				'testShortLongFormats': function () {
					var date_in1   = '2010-09-12 12:30:44',
						date_in2   = '2010-09-12 12:30',
						date_in3   = '12.09.2010 12:30:44',
						date_in4   = '12.09.2010 12:30',
						date_out1 = DT.reformat(date_in1, 'in_datetime', 'in_datetime_short'),
						date_out2 = DT.reformat(date_in2, 'in_datetime_short', 'in_datetime'),
						date_out3 = DT.reformat(date_in3, 'out_datetime', 'out_datetime_short'),
						date_out4 = DT.reformat(date_in4, 'out_datetime_short', 'out_datetime');
					
					ASSERT.areEqual('2010-09-12 12:30', date_out1, 'Internal long to short date time formating not correct');
					ASSERT.areEqual('2010-09-12 12:30:00', date_out2, 'Internal short to long date time formating not correct');
					ASSERT.areEqual('12.09.2010 12:30', date_out3, 'Output long to short date time formating not correct');
					ASSERT.areEqual('12.09.2010 12:30:00', date_out4, 'Output short to long date time formating not correct');
				}
				
			});
			
			//create the console
			var console = new Y.Console({'height': '92%', 'width': '70%'}).render();
			
			Y.Test.Runner.add(testCase);
			Y.Test.Runner.run();
			
		});
		
	//]]>
	</script>

</body>
</html>
