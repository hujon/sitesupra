<!DOCTYPE html>
<html>
<head>
	<title>Button Group test</title>
	
	<!-- Load all base (YUI, Loader, Supra) JS files at once -->
	<script src="/cms/lib/supra/combo/combo.php?/cms/lib/yui.3.5.0/build/yui/yui-min.js&amp;/cms/lib/yui.3.5.0/build/loader/loader-min.js&amp;/cms/lib/supra/build/supra/supra.js&amp;/cms/lib/supra/build/supra/data.js&amp;/cms/lib/supra/build/supra/modules.js"></script>
	
	<!-- Load all base CSS files at once -->
	<link rel="stylesheet" type="text/css" href="/cms/lib/supra/combo/combo.php?/cms/lib/yui.3.5.0/build/cssreset/reset.css&amp;/cms/lib/supra/build/supra/reset.css" />
	
	<link rel="stylesheet" type="text/css" href="group.css" />
</head>
<body class="yui3-skin-supra">

	<div class="cms-content" id="cmsContent">
		
		<div class="ui-dark ui-dark-background buttons-markup">
			
			<h2>Markup - checkbox:</h2>
			
			<div class="button-group" data-type="checkbox">
				<button data-style="small-red" data-id="a" data-state-down="true">Button A</button>
				<button data-style="small-red" data-id="b">Button B</button>
				<button data-style="small-red" data-id="c" data-state-down="true">Button C</button>
			</div>
			
			<p class="label"></p>
			
			<h2>Markup - radio:</h2>
			
			<div class="button-group" data-type="radio">
				<button data-id="a" data-state-down="true">Button A</button>
				<button data-id="b">Button B</button>
				<button data-id="c">Button C</button>
			</div>
			
			<p class="label"></p>
			
			<h2>Markup - radio-checkbox:</h2>
			
			<div class="button-group" data-type="radio-checkbox">
				<button data-style="small-red" data-id="a" data-state-down="true">Button A</button>
				<button data-style="small-red" data-id="b">Button B</button>
				<button data-style="small-red" data-id="c">Button C</button>
			</div>
			
			<p class="label"></p>
			
			<h2>Markup - buttons:</h2>
			
			<div class="button-group">
				<button data-style="small-gray" data-id="a">Button A</button>
				<button data-style="small-gray" data-id="b">Button B</button>
				<button data-style="small-gray" data-id="c">Button C</button>
				<button data-style="small-gray" data-id="d" disabled="disabled">Button D</button>
			</div>
			
			<p class="label"></p>
			
		</div>
		
		<div class="ui-dark ui-dark-background buttons-dynamic">
			
		</div>
		
	</div>

	<script type="text/javascript">
	//<![CDATA[
	
		var groups = [];
	
		Supra('supra.manager', function (Y) {
			
			var APP_PATH = null,
				STATIC_PATH = '/cms',
				DYNAMIC_PATH = '/cms';
			
			//Set current manager paths
			Supra.Manager.Loader.setStaticPath(STATIC_PATH);
			Supra.Manager.Loader.setDynamicPath(DYNAMIC_PATH);
			
			var layout = Supra.Manager.getAction('LayoutContainers');
			
			layout.on('execute', function () {
				
				Supra('supra.button-group', 'supra.form', function () {
					var container_markup = Y.one('div.buttons-markup'),
						container_dynamic = Y.one('div.buttons-dynamic');
					
					function renderGroup (type, title) {
						var group = new Supra.ButtonGroup({
							'type': type,
							'selection': ['a', 'c']
						});
						
						group.add({'id': 'a', 'label': 'Button A', 'style': 'small-blue'});
						group.add({'id': 'b', 'label': 'Button B', 'style': 'small-blue'});
						group.add({'id': 'c', 'label': 'Button C', 'style': 'small-blue'});
						
						container_dynamic.append(Y.Node.create('<h2>' + title + ':</h2>'));
						group.render(container_dynamic);
						container_dynamic.append(Y.Node.create('<p class="label"></p>'));
						
						group.on('selectionChange', function (e) {
							var values = Y.Array.map(e.newVal, function (item) { return item.id; });
							this.get('boundingBox').next().set('text', values.join(', '));
						});
						
						groups.push(group);
					}
					
					
					// ---------------- FROM MARKUP ---------------
					
					Y.all('div.button-group').each(function (node) {
						var markup = Supra.markup = new Supra.ButtonGroup({
							'srcNode': node
						});
						
						markup.render();
						markup.on('selectionChange', function (e) {
							var values = Y.Array.map(e.newVal, function (item) { return item.id; });
							this.get('boundingBox').next().set('text', values.join(', '));
						});
						
						groups.push(markup);
					});
					
					
					// ---------------- CHECKBOXES & RADIO ---------------
					
					renderGroup('checkbox', 'Checkboxes');
					
					renderGroup('radio', 'Radio buttons');
					
					renderGroup('radio-checkbox', 'Radio-checkbox buttons');
					
					
					// ---------------- BUTTONS ---------------
					
					var buttons = Supra.buttons = new Supra.ButtonGroup({
						'style': 'small-gray',
						'buttons': [
							{'id': 'a', 'label': 'Button A'},
							{'id': 'b', 'label': 'Button B'}
						]
					});
					
					buttons.add({'id': 'c', 'label': 'Button C'});
					buttons.add({'id': 'd', 'label': 'Button D', 'disabled': true});
					
					container_dynamic.append(Y.Node.create('<h2>Buttons:</h2>'));
					buttons.render(container_dynamic);
					container_dynamic.append(Y.Node.create('<p class="label"></p>'));
					
					buttons.on('buttonClick', function (e) {
						this.get('boundingBox').next().set('text', 'Clicked on "' + e.button.get('buttonId') + '"');
					});
					
					groups.push(buttons);
				});
				
			});
			
			layout.execute();
			
		});
		
	//]]>
	</script>
	
</body>
</html>
