<!DOCTYPE html>
<html>
<head>
	<title>DataGrid test</title>
	
	<!-- Load all base (YUI, Loader, Supra) JS files at once -->
	<script src="/cms/lib/supra/combo/combo.php?/cms/lib/yui.3.5.0/build/yui/yui-min.js&amp;/cms/lib/yui.3.5.0/build/loader/loader-min.js&amp;/cms/lib/supra/build/supra/supra.js&amp;/cms/lib/supra/build/supra/data.js&amp;/cms/lib/supra/build/supra/modules.js"></script>
	
	<!-- Load all base CSS files at once -->
	<link rel="stylesheet" type="text/css" href="/cms/lib/supra/combo/combo.php?/cms/lib/yui.3.5.0/build/cssreset/reset.css&amp;/cms/lib/supra/build/supra/reset.css" />
	
	<link rel="stylesheet" type="text/css" href="simple.css" />
</head>
<body class="yui3-skin-supra">

	<div class="cms-content" id="cmsContent">
		
		<div class="ui-light ui-light-background">
			
			<div class="magic-content">
				
				
				
			</div>
			
		</div>
		
	</div>

	<script type="text/javascript">
	//<![CDATA[
	
		Supra('supra.manager', 'supra.datagrid', 'supra.datagrid-loader', function (Y) {
			
			var APP_PATH = null,
				STATIC_PATH = '/cms',
				DYNAMIC_PATH = '/cms';
			
			//Set current manager paths
			Supra.Manager.Loader.setStaticPath(STATIC_PATH);
			Supra.Manager.Loader.setDynamicPath(DYNAMIC_PATH);
			
			var layout = Supra.Manager.getAction('LayoutContainers');
			var index = 0;
			
			layout.on('execute', function () {
				
				var datagrid = window.datagrid = new Supra.DataGrid({
					'srcNode': Y.one('.magic-content'),
					'requestURI': 'tree.json.php',
					'style': 'list',
					
					//We will set total number of records manually in 'requestTotalRecords' 
					'requestMetaLocator': {},
					'requestDataLocator': 'data',
					'requestTotalRecords': 200,
					
					'dataColumns': [
						{
							'id': 'id'
						}
					],
					'columns': [
						{
							'id': 'date',
							'title': 'Date',
							'formatter': 'dateShort'
						},
						{
							'id': 'icon',
							'title': '',
							'formatter': function () { return '<img src="/cms/content-manager/sitemap/images/icon-news.png" alt="" />'; }
						},
						{
							'id': 'title',
							'title': 'Title'
						}
					]
				});
				datagrid.plug(Supra.DataGrid.LoaderPlugin, {});
				datagrid.render();
				
			});
			
			layout.execute();
			
		});
		
	//]]>
	</script>
	
</body>
</html>
